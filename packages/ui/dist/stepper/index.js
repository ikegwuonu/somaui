import {createContext,useRef,useId,useContext}from'react';import {cx}from'tailwind-variants';import {jsx,jsxs}from'react/jsx-runtime';function t(...s){return cx(...s)||""}function T(s){return jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",...s,children:jsx("path",{d:"M18 6 6 18M6 6l12 12"})})}function z(s){return jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,...s,children:jsx("path",{d:"M20 6 9 17l-5-5"})})}var u={base:"somaui-step-line absolute w-full group-last:hidden block h-px",top:{noDot:{sm:"top-[22px]",md:"top-6",lg:"top-[26px]"},dot:{sm:"top-[14px]",md:"top-4",lg:"top-[18px]"}},titleLine:"block h-px flex-auto group-last:hidden",color:{primary:"bg-primary",secondary:"bg-secondary",danger:"bg-red",info:"bg-blue",success:"bg-green",warning:"bg-orange"}},b={base:"z-10 inline-flex items-center justify-center rounded-full text-sm font-medium",size:{sm:"h-7 w-7 mt-0.5",md:"h-8 w-8",lg:"h-9 w-9"},waiting:"border border-border bg-white dark:bg-gray-50 text-gray-500",variant:{solid:{base:"text-gray-50 shadow-lg",color:{primary:"bg-primary",secondary:"bg-secondary",danger:"bg-red",info:"bg-blue",success:"bg-green",warning:"bg-orange"}},outline:{base:"border dark:bg-gray-50 bg-white shadow-lg",color:{primary:"text-primary border-primary",secondary:"text-secondary border-secondary",danger:"text-red border-red",info:"text-blue border-blue",success:"text-green border-green",warning:"text-orange border-orange"}}}},S={base:"indent-[-9999px] overflow-hidden mt-1.5",waiting:"bg-gray-300",size:{sm:"h-3 w-3 !mt-2",md:"h-4 w-4",lg:"h-5 w-5"}};function F(s,n,r){return !r&&n==="error"?jsx(T,{className:"h-5 w-5"}):!r&&n==="completed"?jsx(z,{className:"h-5 w-5"}):s+1}function L({title:s,description:n,icon:r,index:g,status:C,size:o="md",variant:d="solid",color:p="primary",dot:h,className:a,circleClassName:c,contentClassName:x,titleClassName:N,descriptionClassName:w}){let v=useId(),e;try{e=G();}catch{e=null;}let f=e?e.registerStep(v):g??0,m=e?e.dot:h,i=C||(e?((P,M)=>M===P?"in-progress":M<P?"completed":"waiting")(e.currentIndex,f):"waiting"),A=e?t(e.getStepClassName(o),a):a,B=e?t(e.getCircleClassName(),c):c,j=e?t(e.getContentClassName(),x):x,O=e?.titleClassName||N,W=e?.descriptionClassName||w;return jsxs("div",{className:t("somaui-step-root","group relative flex flex-1 last:flex-none",A),children:[jsx("div",{className:t("somaui-step-line",u.base,m?u.top.dot[o]:u.top.noDot[o],i==="completed"?u.color[p]:"bg-muted")}),jsx("div",{className:t("somaui-step-circle",b.base,m&&S.base,m?S.size[o]:b.size[o],i==="waiting"?b.waiting:t(b.variant[d].base,b.variant[d].color[p]),m&&i==="waiting"&&S.waiting,B),children:!m&&r||F(f,i,m)}),jsxs("div",{className:t("somaui-step-container","mt-0.5 ml-3 flex flex-1 flex-col",j),children:[jsxs("span",{className:"somaui-step-title flex items-center justify-center group-last:inline-block",children:[jsx("h2",{className:t("somaui-step-title","me-2 mb-0! text-base font-medium",i==="waiting"?"text-gray-500":"text-gray-900",O),children:s}),jsx("span",{className:t(u.titleLine,i==="completed"?u.color[p]:"bg-muted")})]}),n&&jsx("span",{className:t("somaui-step-description","somaui-step-description",i==="in-progress"?"text-gray-900":"text-gray-500",W),children:n})]})]})}L.displayName="Step";var y={line:"[&>.somaui-step-line]:hidden",verticalLine:{base:"[&>.somaui-step-line]:h-full [&>.somaui-step-line]:w-px min-h-[100px] last:min-h-0",left:{noDot:{sm:"[&>.somaui-step-line]:left-3 rtl:[&>.somaui-step-line]:right-3",md:"[&>.somaui-step-line]:left-3.5 rtl:[&>.somaui-step-line]:right-3.5",lg:"[&>.somaui-step-line]:left-4 rtl:[&>.somaui-step-line]:right-4"},dot:{sm:"[&>.somaui-step-line]:left-[5px] rtl:[&>.somaui-step-line]:right-[5px]",md:"[&>.somaui-step-line]:left-2 rtl:[&>.somaui-step-line]:right-2",lg:"[&>.somaui-step-line]:left-2.5 rtl:[&>.somaui-step-line]:right-2.5"}}}},Q={base:"[&>.somaui-step-title]:justify-start [&>.somaui-step-title>span]:hidden"},E=createContext(null);function G(){let s=useContext(E);if(!s)throw new Error("useStepper must be used within a Stepper component");return s}function R({currentIndex:s=0,children:n,direction:r="horizontal",dot:g=false,className:C,titleClassName:o,dotClassName:d,contentClassName:p,descriptionClassName:h}){let a=useRef(new Map),c=useRef([]);a.current.clear(),c.current=[];let x=e=>{if(!a.current.has(e)){let f=c.current.length;return c.current.push(e),a.current.set(e,f),f}return a.current.get(e)},N=e=>t(r==="horizontal"&&y.line,r==="vertical"&&y.verticalLine.base,r==="vertical"&&(g?y.verticalLine.left.dot[e]:y.verticalLine.left.noDot[e])),w=()=>t(g&&r==="vertical"&&"mt-1.5",d),v=()=>t(r==="vertical"&&Q.base,p);return jsx(E.Provider,{value:{currentIndex:s,direction:r,dot:g,dotClassName:d,contentClassName:p,titleClassName:o,descriptionClassName:h,registerStep:x,getStepClassName:N,getCircleClassName:w,getContentClassName:v},children:jsx("div",{className:t("somaui-stepper-root","flex justify-between space-x-4 rtl:space-x-0",r==="vertical"&&"flex-col space-x-0",C),children:n})})}R.Step=L;R.displayName="Stepper";
export{R as Stepper};