import {useRef}from'react';import {tv,cx}from'tailwind-variants';import {jsxs,jsx}from'react/jsx-runtime';function u(...o){return cx(...o)||""}var F=tv({base:"text-red",variants:{size:{sm:"text-[11px] mt-0.5",md:"text-[13px] mt-0.5",lg:"text-[13px] mt-1"}}});function m({as:o="div",error:s,size:d,className:n}){let p=o;return s?jsx(p,{role:"alert","aria-live":"polite",className:F({size:d,className:n}),children:s}):null}m.displayName="FieldErrorText";var K=tv({base:"flex flex-row",variants:{center:{true:"justify-center align-center",false:""}},defaultVariants:{center:false}}),$=tv({base:"block peer text-center bg-transparent mr-2 focus:placeholder:opacity-0 focus:outline-none transition duration-200 rounded-[var(--border-radius)] border-[length:var(--border-width)]",variants:{variant:{flat:"focus:ring-[1.8px] border-0 placeholder:opacity-90 bg-muted/70 backdrop-blur focus:ring-primary focus:enabled:bg-transparent",outline:"bg-transparent focus:ring-[0.8px] ring-border border-border placeholder:text-gray-500 hover:enabled:border-primary focus:enabled:border-primary focus:ring-primary"},size:{sm:"px-1 py-1 h-8 w-8 text-sm",md:"px-2 py-2 h-10 w-10 text-base",lg:"px-2 py-2 h-12 w-12 text-lg"},disabled:{true:"disabled:bg-muted/70 disabled:backdrop-blur disabled:placeholder:text-muted-foreground disabled:text-muted-foreground disabled:cursor-not-allowed disabled:border-muted"},error:{true:"border-red hover:enabled:!border-red focus:enabled:!border-red !ring-red"}},defaultVariants:{variant:"outline",size:"md"}});function P({type:o="text",defaultValue:s,mask:d=false,length:n=4,setValue:p,center:g=true,size:y="md",variant:E="outline",placeholder:T="\u25CB",error:l,className:V,inputClassName:L,errorClassName:M,disabled:w,onChange:q,label:D,...v}){let t=useRef([]);function N(r){return e=>{e&&(t.current[r]=e);}}function c(){p?.(t.current.map(r=>r.value).join(""));}function k(r,e){let a=r.target.value.split("");t.current[e].value=a[a.length-1],e<n-1&&t.current[e+1].focus(),c();}function z(r,e){let a=t.current[e].value;if(r.key==="ArrowRight"&&e<n-1&&t.current[e+1].focus(),r.key==="ArrowLeft"&&e>0&&t.current[e-1].focus(),r.key==="Backspace"){if(a!=="")t.current[e].value="";else {if(e===0)return;t.current[e-1].value="",t.current[e-1].focus();}c();}}function H(r,e){r.preventDefault();let f=r.clipboardData.getData("text").replace(/\D/g,"").split("");for(let i=0;i<n-e&&i<f.length;i+=1)t.current[e+i]&&(t.current[e+i].value=f[i]??"");let C=Math.min(e+f.length-1,n-1);t.current[C]&&t.current[C].focus(),c();}let x=D||`Pin code, ${n} digits`;return jsxs("div",{className:u("somaui-pin-code-root","flex flex-col",V),children:[jsx("div",{role:"group","aria-label":x,"aria-invalid":l?"true":void 0,"aria-required":v.required,className:K({center:g}),children:Array.from({length:n},(r,e)=>jsx("input",{ref:N(e),type:o,inputMode:o==="text"?"text":"numeric",pattern:o==="number"?"[0-9]*":void 0,maxLength:1,defaultValue:s?s.toString().split("")[e]:"",autoCapitalize:"off",autoCorrect:"off",autoComplete:"one-time-code",placeholder:T,"aria-invalid":l?"true":void 0,"aria-label":`${x}, digit ${e+1} of ${n}`,onChange:a=>k(a,e),onKeyDown:a=>z(a,e),onPaste:a=>H(a,e),className:$({variant:E,size:y,disabled:w,error:!!l,className:u(d&&"[-moz-text-security:circle] [-webkit-text-security:disc] [text-security:circle]",L)}),...v},e))}),l&&jsx(m,{size:y,error:l,className:u("somaui-pin-code-error-text",g&&"flex justify-center",M)})]})}P.displayName="PinCode";export{P as PinCode};