import {f,i,g,k,h,j,b,a as a$7}from'../chunk-UIB5IY5W.js';import'../chunk-OFTA724O.js';import {a as a$3}from'../chunk-KQOZQ26D.js';import {a as a$1}from'../chunk-HAJDUVDC.js';import {a as a$5}from'../chunk-YMGWFAOA.js';import {a as a$6}from'../chunk-LYGZSVR4.js';import'../chunk-VA57PCYD.js';import {a as a$2}from'../chunk-BVJQ3HCT.js';import {a as a$4}from'../chunk-2M7YU2YN.js';import {a}from'../chunk-FRVM5LHZ.js';import {useState,useMemo,useCallback}from'react';import {Listbox,Label,ListboxButton,ListboxOptions,ListboxOption}from'@headlessui/react';import {tv}from'tailwind-variants';import {jsxs,jsx,Fragment}from'react/jsx-runtime';var J=tv({base:"flex group items-center peer border-[length:var(--border-width)] hover:border-primary w-full transition duration-200 hover:ring-primary focus:border-primary focus:ring-[0.8px] focus:ring-primary rounded-[var(--border-radius)]",variants:{variant:{text:"border-transparent ring-transparent bg-transparent",outline:"border-border ring-border bg-transparent"},size:{sm:"px-2 py-1 text-xs min-h-8",md:"px-3 py-2 text-sm min-h-10",lg:"px-4 py-2 text-base min-h-12"},disabled:{true:"!bg-muted/70 backdrop-blur cursor-not-allowed !border-muted text-muted-foreground placeholder:text-muted-foreground !ring-muted"},error:{true:"!border-red hover:!border-red focus:!border-red !ring-red"},hasPrefix:{true:""},hasSuffix:{true:""}},compoundVariants:[{hasPrefix:true,class:"ps-2.5"},{hasSuffix:true,class:"pe-2.5"}],defaultVariants:{variant:"outline",size:"md"}}),Y={base:"peer checked:bg-none focus:ring-offset-background transition duration-200 ease-in-out size-5 rounded bg-transparent border border-border ring-border focus:ring-border checked:!bg-primary checked:!border-primary hover:enabled:border-primary",icon:"peer-checked:opacity-100 absolute opacity-0 text-primary-foreground size-4 start-0.5 top-0.5"};function Ue({gap:_=6,modal:$=false,value:O,error:m,label:M,options:x,onClear:w,onChange:y,disabled:u,clearable:ee,className:te,autoFocus:ae,helperText:I,size:o="md",searchProps:re,stickySearch:se,displayValue:P,prefix:N=null,labelClassName:oe,onSearchChange:le,errorClassName:ie,inPortal:d=true,selectClassName:ne,helperClassName:ce,prefixClassName:pe,suffixClassName:me,searchClassName:ue,optionClassName:de,defaultValue:be=[],dropdownClassName:fe,searchable:ge=false,variant:L="outline",searchSuffix:B=null,searchType:he="text",selectedItemClassName:xe,getOptionDisplayValue:R,getOptionValue:v,searchByKey:ye="label",optionCheckBox:Ne=true,searchPrefixClassName:ve,searchSuffixClassName:Se,labelWeight:ke="medium",searchDisabled:T=false,searchReadOnly:Ce=false,selectedOptionClassName:Oe,searchContainerClassName:Me,selectContainerClassName:we,placeholder:Ie="Select...",hideSelectedOptions:Pe=false,placement:Le="bottom-start",getOptionValueKey:S="value",disableDefaultFilter:Be,searchPlaceHolder:Re="Search...",suffix:b$1=jsx(b,{strokeWidth:"2",className:"size-4"}),searchPrefix:V=jsx(a$7,{strokeWidth:"2",className:"size-4"}),...Te}){let[f$1,c]=f(be,O),[F,z]=useState(""),g$1=useMemo(()=>f$1??[],[f$1]),h$1=g$1.length===0,Ve=i(x,F,ye,Be),Fe=useCallback(e=>{e?.stopPropagation(),c([]),z(""),w?.(e);},[w,c]),E=useCallback(e=>{let l=g$1.filter(r=>r!==e);c(l),y?.(l);},[g$1,c,y]),ze=useCallback(e=>v?v(e):e[S],[v,S]);return jsxs("div",{className:a("somaui-multi-select-root","grid w-full grid-cols-1",te),children:[jsx(Listbox,{multiple:true,disabled:u,value:f$1,defaultValue:f$1,onChange:e=>{y?.(e),c(e);},...Te,children:jsxs("div",{className:"contents",children:[M&&jsx(Label,{className:a("somaui-multi-select-label","block",a$1.size[o],a$1.weight[ke],u&&"text-muted-foreground",oe),children:M}),jsxs("div",{className:a(!d&&"relative"),children:[jsxs(ListboxButton,{className:J({variant:L,size:o,disabled:u,error:!!(m&&h$1),hasPrefix:!!N,hasSuffix:!!b$1,className:ne}),autoFocus:ae,children:[N&&jsx("span",{className:a("somaui-multi-select-prefix","block leading-normal whitespace-nowrap",pe),children:N}),P?P(g$1,x,E):jsx("span",{className:a("somaui-multi-select-value","flex w-full flex-wrap items-center gap-2 truncate text-start",h$1&&"text-muted-foreground",we),children:h$1?Ie:jsx(Fragment,{children:O?.map((e,l)=>{let r=x.find(p=>p[S]===e);return jsxs("span",{className:a("item-center border-border flex gap-1 overflow-hidden rounded-md border text-xs",xe),children:[jsx("span",{className:"py-1 ps-2",children:r?.label}),jsx("span",{className:"hover:bg-muted px-1 py-1",onClick:p=>{p.stopPropagation(),E(e);},children:jsx(a$2,{strokeWidth:"2",className:"size-4 cursor-pointer"})})]},l)})})}),ee&&!h$1&&!u&&jsx(a$3,{as:"span",size:o,onClick:Fe,hasSuffix:!!b$1}),b$1&&jsx("span",{className:a("somaui-multi-select-suffix","leading-normal whitespace-nowrap transition-transform duration-200 group-data-open:rotate-180",me),children:b$1})]}),jsxs(ListboxOptions,{modal:$,portal:d,...d&&{anchor:{to:g[Le],gap:_}},className:a("somaui-multi-select-options",j.base,j.shadow,d?j.inPortal:j.notInPortal,fe),children:[ge&&jsxs("div",{className:a(k.base,se&&k.stickySearch,Me),children:[V&&jsx("span",{className:a("somaui-multi-select-prefix",k.prefix,ve),children:V}),jsx("input",{type:he,spellCheck:false,value:F,disabled:T,readOnly:Ce,placeholder:Re,onChange:e=>{z(e.target.value),le?.(e.target.value);},onKeyDown:e=>h(e),className:J({variant:L,size:o,disabled:T,className:a(k.inputBase,ue)}),...re}),B&&jsx("span",{className:a("somaui-multi-select-suffix",k.suffix,Se),children:B})]}),Ve.map((e,l)=>jsx(ListboxOption,{value:ze(e),...e?.disabled&&{disabled:e?.disabled},className:({focus:r,selected:p})=>a("somaui-multi-select-option","flex w-full items-center px-3 py-1.5",r&&"bg-muted/70","rounded-[calc(var(--border-radius)/2)]",o&&j.item.size[o],!e?.disabled&&"cursor-pointer",p&&Pe&&"hidden!",de),children:({selected:r})=>jsx(Fragment,{children:R?R(e,r):jsxs("div",{className:a("flex items-center gap-2",r?"font-medium":"text-foreground",Oe),children:[Ne&&jsxs("span",{className:"relative leading-none",children:[jsx("input",{type:"checkbox",readOnly:true,checked:r,className:a("somaui-checkbox-input",Y.base)}),jsx(a$4,{className:a("somaui-checkbox-icon",Y.icon)})]}),e.label]})})},l))]})]})]})}),!m&&I&&jsx(a$5,{size:o,className:ce,children:I}),m&&jsx(a$6,{size:o,error:m,className:ie})]})}export{Ue as MultiSelect};