'use strict';var chunkQ564QYE2_cjs=require('../chunk-Q564QYE2.cjs');require('../chunk-JTX54XMZ.cjs');var chunkAP5QHQ4H_cjs=require('../chunk-AP5QHQ4H.cjs'),chunkJC273QQM_cjs=require('../chunk-JC273QQM.cjs'),chunkIDMAWWDT_cjs=require('../chunk-IDMAWWDT.cjs'),chunkVTA6T6UH_cjs=require('../chunk-VTA6T6UH.cjs');require('../chunk-24Z3YLK5.cjs');var chunkWYJRCF6J_cjs=require('../chunk-WYJRCF6J.cjs'),chunkNRS3MTIF_cjs=require('../chunk-NRS3MTIF.cjs'),chunkOS6E7JMG_cjs=require('../chunk-OS6E7JMG.cjs'),react=require('react'),react$1=require('@headlessui/react'),tailwindVariants=require('tailwind-variants'),jsxRuntime=require('react/jsx-runtime');var J=tailwindVariants.tv({base:"flex group items-center peer border-[length:var(--border-width)] hover:border-primary w-full transition duration-200 hover:ring-primary focus:border-primary focus:ring-[0.8px] focus:ring-primary rounded-[var(--border-radius)]",variants:{variant:{text:"border-transparent ring-transparent bg-transparent",outline:"border-border ring-border bg-transparent"},size:{sm:"px-2 py-1 text-xs min-h-8",md:"px-3 py-2 text-sm min-h-10",lg:"px-4 py-2 text-base min-h-12"},disabled:{true:"!bg-muted/70 backdrop-blur cursor-not-allowed !border-muted text-muted-foreground placeholder:text-muted-foreground !ring-muted"},error:{true:"!border-red hover:!border-red focus:!border-red !ring-red"},hasPrefix:{true:""},hasSuffix:{true:""}},compoundVariants:[{hasPrefix:true,class:"ps-2.5"},{hasSuffix:true,class:"pe-2.5"}],defaultVariants:{variant:"outline",size:"md"}}),Y={base:"peer checked:bg-none focus:ring-offset-background transition duration-200 ease-in-out size-5 rounded bg-transparent border border-border ring-border focus:ring-border checked:!bg-primary checked:!border-primary hover:enabled:border-primary",icon:"peer-checked:opacity-100 absolute opacity-0 text-primary-foreground size-4 start-0.5 top-0.5"};function Ue({gap:_=6,modal:$=false,value:O,error:m,label:M,options:x,onClear:w,onChange:y,disabled:u,clearable:ee,className:te,autoFocus:ae,helperText:I,size:o="md",searchProps:re,stickySearch:se,displayValue:P,prefix:N=null,labelClassName:oe,onSearchChange:le,errorClassName:ie,inPortal:d=true,selectClassName:ne,helperClassName:ce,prefixClassName:pe,suffixClassName:me,searchClassName:ue,optionClassName:de,defaultValue:be=[],dropdownClassName:fe,searchable:ge=false,variant:L="outline",searchSuffix:B=null,searchType:he="text",selectedItemClassName:xe,getOptionDisplayValue:R,getOptionValue:v,searchByKey:ye="label",optionCheckBox:Ne=true,searchPrefixClassName:ve,searchSuffixClassName:Se,labelWeight:ke="medium",searchDisabled:T=false,searchReadOnly:Ce=false,selectedOptionClassName:Oe,searchContainerClassName:Me,selectContainerClassName:we,placeholder:Ie="Select...",hideSelectedOptions:Pe=false,placement:Le="bottom-start",getOptionValueKey:S="value",disableDefaultFilter:Be,searchPlaceHolder:Re="Search...",suffix:b=jsxRuntime.jsx(chunkQ564QYE2_cjs.b,{strokeWidth:"2",className:"size-4"}),searchPrefix:V=jsxRuntime.jsx(chunkQ564QYE2_cjs.a,{strokeWidth:"2",className:"size-4"}),...Te}){let[f,c]=chunkQ564QYE2_cjs.f(be,O),[F,z]=react.useState(""),g=react.useMemo(()=>f??[],[f]),h=g.length===0,Ve=chunkQ564QYE2_cjs.i(x,F,ye,Be),Fe=react.useCallback(e=>{e?.stopPropagation(),c([]),z(""),w?.(e);},[w,c]),E=react.useCallback(e=>{let l=g.filter(r=>r!==e);c(l),y?.(l);},[g,c,y]),ze=react.useCallback(e=>v?v(e):e[S],[v,S]);return jsxRuntime.jsxs("div",{className:chunkOS6E7JMG_cjs.a("somaui-multi-select-root","grid w-full grid-cols-1",te),children:[jsxRuntime.jsx(react$1.Listbox,{multiple:true,disabled:u,value:f,defaultValue:f,onChange:e=>{y?.(e),c(e);},...Te,children:jsxRuntime.jsxs("div",{className:"contents",children:[M&&jsxRuntime.jsx(react$1.Label,{className:chunkOS6E7JMG_cjs.a("somaui-multi-select-label","block",chunkJC273QQM_cjs.a.size[o],chunkJC273QQM_cjs.a.weight[ke],u&&"text-muted-foreground",oe),children:M}),jsxRuntime.jsxs("div",{className:chunkOS6E7JMG_cjs.a(!d&&"relative"),children:[jsxRuntime.jsxs(react$1.ListboxButton,{className:J({variant:L,size:o,disabled:u,error:!!(m&&h),hasPrefix:!!N,hasSuffix:!!b,className:ne}),autoFocus:ae,children:[N&&jsxRuntime.jsx("span",{className:chunkOS6E7JMG_cjs.a("somaui-multi-select-prefix","block leading-normal whitespace-nowrap",pe),children:N}),P?P(g,x,E):jsxRuntime.jsx("span",{className:chunkOS6E7JMG_cjs.a("somaui-multi-select-value","flex w-full flex-wrap items-center gap-2 truncate text-start",h&&"text-muted-foreground",we),children:h?Ie:jsxRuntime.jsx(jsxRuntime.Fragment,{children:O?.map((e,l)=>{let r=x.find(p=>p[S]===e);return jsxRuntime.jsxs("span",{className:chunkOS6E7JMG_cjs.a("item-center border-border flex gap-1 overflow-hidden rounded-md border text-xs",xe),children:[jsxRuntime.jsx("span",{className:"py-1 ps-2",children:r?.label}),jsxRuntime.jsx("span",{className:"hover:bg-muted px-1 py-1",onClick:p=>{p.stopPropagation(),E(e);},children:jsxRuntime.jsx(chunkWYJRCF6J_cjs.a,{strokeWidth:"2",className:"size-4 cursor-pointer"})})]},l)})})}),ee&&!h&&!u&&jsxRuntime.jsx(chunkAP5QHQ4H_cjs.a,{as:"span",size:o,onClick:Fe,hasSuffix:!!b}),b&&jsxRuntime.jsx("span",{className:chunkOS6E7JMG_cjs.a("somaui-multi-select-suffix","leading-normal whitespace-nowrap transition-transform duration-200 group-data-open:rotate-180",me),children:b})]}),jsxRuntime.jsxs(react$1.ListboxOptions,{modal:$,portal:d,...d&&{anchor:{to:chunkQ564QYE2_cjs.g[Le],gap:_}},className:chunkOS6E7JMG_cjs.a("somaui-multi-select-options",chunkQ564QYE2_cjs.j.base,chunkQ564QYE2_cjs.j.shadow,d?chunkQ564QYE2_cjs.j.inPortal:chunkQ564QYE2_cjs.j.notInPortal,fe),children:[ge&&jsxRuntime.jsxs("div",{className:chunkOS6E7JMG_cjs.a(chunkQ564QYE2_cjs.k.base,se&&chunkQ564QYE2_cjs.k.stickySearch,Me),children:[V&&jsxRuntime.jsx("span",{className:chunkOS6E7JMG_cjs.a("somaui-multi-select-prefix",chunkQ564QYE2_cjs.k.prefix,ve),children:V}),jsxRuntime.jsx("input",{type:he,spellCheck:false,value:F,disabled:T,readOnly:Ce,placeholder:Re,onChange:e=>{z(e.target.value),le?.(e.target.value);},onKeyDown:e=>chunkQ564QYE2_cjs.h(e),className:J({variant:L,size:o,disabled:T,className:chunkOS6E7JMG_cjs.a(chunkQ564QYE2_cjs.k.inputBase,ue)}),...re}),B&&jsxRuntime.jsx("span",{className:chunkOS6E7JMG_cjs.a("somaui-multi-select-suffix",chunkQ564QYE2_cjs.k.suffix,Se),children:B})]}),Ve.map((e,l)=>jsxRuntime.jsx(react$1.ListboxOption,{value:ze(e),...e?.disabled&&{disabled:e?.disabled},className:({focus:r,selected:p})=>chunkOS6E7JMG_cjs.a("somaui-multi-select-option","flex w-full items-center px-3 py-1.5",r&&"bg-muted/70","rounded-[calc(var(--border-radius)/2)]",o&&chunkQ564QYE2_cjs.j.item.size[o],!e?.disabled&&"cursor-pointer",p&&Pe&&"hidden!",de),children:({selected:r})=>jsxRuntime.jsx(jsxRuntime.Fragment,{children:R?R(e,r):jsxRuntime.jsxs("div",{className:chunkOS6E7JMG_cjs.a("flex items-center gap-2",r?"font-medium":"text-foreground",Oe),children:[Ne&&jsxRuntime.jsxs("span",{className:"relative leading-none",children:[jsxRuntime.jsx("input",{type:"checkbox",readOnly:true,checked:r,className:chunkOS6E7JMG_cjs.a("somaui-checkbox-input",Y.base)}),jsxRuntime.jsx(chunkNRS3MTIF_cjs.a,{className:chunkOS6E7JMG_cjs.a("somaui-checkbox-icon",Y.icon)})]}),e.label]})})},l))]})]})]})}),!m&&I&&jsxRuntime.jsx(chunkIDMAWWDT_cjs.a,{size:o,className:ce,children:I}),m&&jsxRuntime.jsx(chunkVTA6T6UH_cjs.a,{size:o,error:m,className:ie})]})}exports.MultiSelect=Ue;