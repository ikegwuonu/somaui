'use strict';var chunkAP5QHQ4H_cjs=require('../chunk-AP5QHQ4H.cjs'),chunkNXT4A7B2_cjs=require('../chunk-NXT4A7B2.cjs'),chunkVTA6T6UH_cjs=require('../chunk-VTA6T6UH.cjs');require('../chunk-24Z3YLK5.cjs');var chunkPSZ4TFJ7_cjs=require('../chunk-PSZ4TFJ7.cjs'),react=require('react'),react$1=require('@headlessui/react'),tailwindVariants=require('tailwind-variants'),jsxRuntime=require('react/jsx-runtime');function j(t){return jsxRuntime.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",...t,children:jsxRuntime.jsx("path",{d:"M18 6 6 18M6 6l12 12"})})}function _(t){return jsxRuntime.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:jsxRuntime.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})})}function Q(t){return jsxRuntime.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:t.strokeWidth??1.5,stroke:"currentColor",...t,children:jsxRuntime.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})})}var q=(t,i)=>{let l=i!==void 0,[a,d]=react.useState(t);return [l?i:a,g=>{l||d(g);}]},J={top:"top",right:"right",bottom:"bottom",left:"left","top-start":"top start","top-end":"top end","bottom-start":"bottom start","bottom-end":"bottom end","right-start":"right start","right-end":"right end","left-start":"left start","left-end":"left end"};function Y(t){(!["ArrowUp","ArrowDown","Enter","Home","End","Escape"].includes(t.key)||t.shiftKey||t.ctrlKey||t.metaKey||t.altKey)&&t.stopPropagation();}function Z(t,i,l,a){return react.useMemo(()=>a?t:t.filter(d=>{let p=d[l];return p?String(p).toLowerCase().includes(i.toLowerCase()):false}),[i,t,a,l])}function te(t){return jsxRuntime.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,...t,children:jsxRuntime.jsx("path",{d:"M20 6 9 17l-5-5"})})}var I={base:"z-[999] border-[length:var(--border-width)] border-border bg-background !p-1.5 focus-visible:outline-none dark:bg-muted/80 dark:backdrop-blur-sm rounded-[var(--border-radius)]",shadow:"shadow-[0px_8px_24px_rgba(149,157,165,0.2)]"};var m={base:`${I.base} overflow-auto w-[var(--button-width)] !outline-none !ring-0 m-0 [&>li]:!m-0 [scrollbar-width:thin] [scrollbar-color:rgba(0,0,0,0.2)_rgba(0,0,0,0)] [-ms-overflow-style:none] [&::-webkit-scrollbar-track]:shadow-none [&::-webkit-scrollbar-track]:bg-transparent [&::-webkit-scrollbar]:bg-transparent [&::-webkit-scrollbar]:w-[5px] [&::-webkit-scrollbar-thumb]:bg-muted [&::-webkit-scrollbar-thumb]:rounded-lg data-[open]:opacity-100 data-[leave]:data-[closed]:opacity-100`,shadow:I.shadow,item:{size:{sm:"text-xs",md:"text-sm",lg:"text-base"}},inPortal:"[--anchor-max-height:256px]",notInPortal:"absolute z-10 h-[256px] start-0 top-full mt-1.5"},b={base:"relative mb-2 block group [&.sticky]:mb-0",inputBase:"px-10 placeholder:text-muted-foreground",prefix:"absolute z-10 start-1 top-5 group-[.sticky]:top-7 inline-block -translate-y-1/2 whitespace-nowrap leading-normal text-muted-foreground",suffix:"absolute z-10 end-1 top-5 group-[.sticky]:top-7 inline-block -translate-y-1/2 whitespace-nowrap leading-normal text-muted-foreground",stickySearch:"sticky top-0 z-10 bg-background pt-2 -translate-y-2"};var re=tailwindVariants.tv({base:"flex group items-center peer border-[length:var(--border-width)] hover:border-primary w-full transition duration-200 hover:ring-primary focus:border-primary focus:ring-[0.8px] focus:ring-primary rounded-[var(--border-radius)]",variants:{variant:{text:"border-transparent ring-transparent bg-transparent",outline:"border-border ring-border bg-transparent"},size:{sm:"px-2 py-1 text-xs min-h-8",md:"px-3 py-2 text-sm min-h-10",lg:"px-4 py-2 text-base min-h-12"},disabled:{true:"!bg-muted/70 backdrop-blur cursor-not-allowed !border-muted text-muted-foreground placeholder:text-muted-foreground !ring-muted"},error:{true:"!border-red hover:!border-red focus:!border-red !ring-red"},hasPrefix:{true:""},hasSuffix:{true:""}},compoundVariants:[{hasPrefix:true,class:"ps-2.5"},{hasSuffix:true,class:"pe-2.5"}],defaultVariants:{variant:"outline",size:"md"}}),oe={base:"peer checked:bg-none focus:ring-offset-background transition duration-200 ease-in-out size-5 rounded bg-transparent border border-border ring-border focus:ring-border checked:!bg-primary checked:!border-primary hover:enabled:border-primary",icon:"peer-checked:opacity-100 absolute opacity-0 text-primary-foreground size-4 start-0.5 top-0.5"};function Ye({gap:t=6,modal:i=false,value:l,error:a,label:d,options:p,onClear:N,onChange:g,disabled:x,clearable:se,className:ne,autoFocus:ie,helperText:V,size:c="md",searchProps:le,stickySearch:ce,displayValue:T,prefix:C=null,labelClassName:pe,onSearchChange:de,errorClassName:ue,inPortal:y=true,selectClassName:me,helperClassName:be,prefixClassName:ge,suffixClassName:fe,searchClassName:he,optionClassName:xe,defaultValue:ye=[],dropdownClassName:ke,searchable:ve=false,variant:R="outline",searchSuffix:E=null,searchType:we="text",selectedItemClassName:Se,getOptionDisplayValue:z,getOptionValue:O,searchByKey:Ne="label",optionCheckBox:Ce=true,searchPrefixClassName:Oe,searchSuffixClassName:Me,labelWeight:Pe="medium",searchDisabled:B=false,searchReadOnly:Ie=false,selectedOptionClassName:Le,searchContainerClassName:Ve,selectContainerClassName:Te,placeholder:Re="Select...",hideSelectedOptions:Ee=false,placement:ze="bottom-start",getOptionValueKey:M="value",disableDefaultFilter:Be,searchPlaceHolder:Ae="Search...",suffix:k=jsxRuntime.jsx(Q,{strokeWidth:"2",className:"size-4"}),searchPrefix:A=jsxRuntime.jsx(_,{strokeWidth:"2",className:"size-4"}),...Ge}){let[v,f]=q(ye,l),[G,H]=react.useState(""),w=react.useMemo(()=>v??[],[v]),S=w.length===0,He=Z(p,G,Ne,Be),Fe=react.useCallback(e=>{e?.stopPropagation(),f([]),H(""),N?.(e);},[N,f]),F=react.useCallback(e=>{let u=w.filter(s=>s!==e);f(u),g?.(u);},[w,f,g]),Ke=react.useCallback(e=>O?O(e):e[M],[O,M]);return jsxRuntime.jsxs("div",{className:chunkPSZ4TFJ7_cjs.a("somaui-multi-select-root","grid w-full grid-cols-1",ne),children:[jsxRuntime.jsx(react$1.Listbox,{multiple:true,disabled:x,value:v,defaultValue:v,onChange:e=>{g?.(e),f(e);},...Ge,children:jsxRuntime.jsxs("div",{className:"contents",children:[d&&jsxRuntime.jsx(react$1.Label,{className:chunkPSZ4TFJ7_cjs.a("somaui-multi-select-label","block",chunkNXT4A7B2_cjs.a.size[c],chunkNXT4A7B2_cjs.a.weight[Pe],x&&"text-muted-foreground",pe),children:d}),jsxRuntime.jsxs("div",{className:chunkPSZ4TFJ7_cjs.a(!y&&"relative"),children:[jsxRuntime.jsxs(react$1.ListboxButton,{className:re({variant:R,size:c,disabled:x,error:!!(a&&S),hasPrefix:!!C,hasSuffix:!!k,className:me}),autoFocus:ie,children:[C&&jsxRuntime.jsx("span",{className:chunkPSZ4TFJ7_cjs.a("somaui-multi-select-prefix","block leading-normal whitespace-nowrap",ge),children:C}),T?T(w,p,F):jsxRuntime.jsx("span",{className:chunkPSZ4TFJ7_cjs.a("somaui-multi-select-value","flex w-full flex-wrap items-center gap-2 truncate text-start",S&&"text-muted-foreground",Te),children:S?Re:jsxRuntime.jsx(jsxRuntime.Fragment,{children:l?.map((e,u)=>{let s=p.find(h=>h[M]===e);return jsxRuntime.jsxs("span",{className:chunkPSZ4TFJ7_cjs.a("item-center border-border flex gap-1 overflow-hidden rounded-md border text-xs",Se),children:[jsxRuntime.jsx("span",{className:"py-1 ps-2",children:s?.label}),jsxRuntime.jsx("span",{className:"hover:bg-muted px-1 py-1",onClick:h=>{h.stopPropagation(),F(e);},children:jsxRuntime.jsx(j,{strokeWidth:"2",className:"size-4 cursor-pointer"})})]},u)})})}),se&&!S&&!x&&jsxRuntime.jsx(chunkAP5QHQ4H_cjs.a,{as:"span",size:c,onClick:Fe,hasSuffix:!!k}),k&&jsxRuntime.jsx("span",{className:chunkPSZ4TFJ7_cjs.a("somaui-multi-select-suffix","leading-normal whitespace-nowrap transition-transform duration-200 group-data-open:rotate-180",fe),children:k})]}),jsxRuntime.jsxs(react$1.ListboxOptions,{modal:i,portal:y,...y&&{anchor:{to:J[ze],gap:t}},className:chunkPSZ4TFJ7_cjs.a("somaui-multi-select-options",m.base,m.shadow,y?m.inPortal:m.notInPortal,ke),children:[ve&&jsxRuntime.jsxs("div",{className:chunkPSZ4TFJ7_cjs.a(b.base,ce&&b.stickySearch,Ve),children:[A&&jsxRuntime.jsx("span",{className:chunkPSZ4TFJ7_cjs.a("somaui-multi-select-prefix",b.prefix,Oe),children:A}),jsxRuntime.jsx("input",{type:we,spellCheck:false,value:G,disabled:B,readOnly:Ie,placeholder:Ae,onChange:e=>{H(e.target.value),de?.(e.target.value);},onKeyDown:e=>Y(e),className:re({variant:R,size:c,disabled:B,className:chunkPSZ4TFJ7_cjs.a(b.inputBase,he)}),...le}),E&&jsxRuntime.jsx("span",{className:chunkPSZ4TFJ7_cjs.a("somaui-multi-select-suffix",b.suffix,Me),children:E})]}),He.map((e,u)=>jsxRuntime.jsx(react$1.ListboxOption,{value:Ke(e),...e?.disabled&&{disabled:e?.disabled},className:({focus:s,selected:h})=>chunkPSZ4TFJ7_cjs.a("somaui-multi-select-option","flex w-full items-center px-3 py-1.5",s&&"bg-muted/70","rounded-[calc(var(--border-radius)/2)]",c&&m.item.size[c],!e?.disabled&&"cursor-pointer",h&&Ee&&"hidden!",xe),children:({selected:s})=>jsxRuntime.jsx(jsxRuntime.Fragment,{children:z?z(e,s):jsxRuntime.jsxs("div",{className:chunkPSZ4TFJ7_cjs.a("flex items-center gap-2",s?"font-medium":"text-foreground",Le),children:[Ce&&jsxRuntime.jsxs("span",{className:"relative leading-none",children:[jsxRuntime.jsx("input",{type:"checkbox",readOnly:true,checked:s,className:chunkPSZ4TFJ7_cjs.a("somaui-checkbox-input",oe.base)}),jsxRuntime.jsx(te,{className:chunkPSZ4TFJ7_cjs.a("somaui-checkbox-icon",oe.icon)})]}),e.label]})})},u))]})]})]})}),!a&&V&&jsxRuntime.jsx(chunkNXT4A7B2_cjs.b,{size:c,className:be,children:V}),a&&jsxRuntime.jsx(chunkVTA6T6UH_cjs.a,{size:c,error:a,className:ue})]})}
exports.MultiSelect=Ye;