import {a}from'../chunk-BVZYQBQW.js';import J,{createContext,useRef,useState,useContext,useMemo,useEffect}from'react';import {TabGroup,Tab,TabPanel,TabList,TabPanels}from'@headlessui/react';import {tv}from'tailwind-variants';import {jsx,jsxs}from'react/jsx-runtime';var A=t=>{if(!t)return {top:0,left:0};let{top:e,left:o}=t.getBoundingClientRect();return {top:e,left:o}},m={top:-1e3,left:-1e3,right:-1e3,width:0,height:0,elementTop:-1e3},v=(t,e)=>{if(!t)return m;let o=e?e():null,r=o||document.documentElement,{top:n,left:s}=A(o);return {...t,width:t.width||t.right-t.left,height:t.height||t.top-t.bottom,top:t.bottom+r.scrollTop-n,left:t.left+r.scrollLeft-s,elementTop:t.top+r.scrollTop-n}},P=t=>t?t.top===m.top&&t.left===m.left:true,W=(t,e)=>{if(!t||!t.current)return m;let o=t.current.getBoundingClientRect();return v(o,e)},F=(t,e)=>{let o=t?.target?.getBoundingClientRect();return o?v(o,e):m},I=t=>typeof t?.target>"u",g=t=>{let[e,o]=useState(m);return {rect:e,setRect:(n,s)=>{if(I(n))return o(W(n,s));o(F(n,s));}}};var $=t=>{let e=useRef(null);return useEffect(()=>{e.current=t;}),e?e.current:null},L=$;function y({rect:t,visible:e,hoverHeightRatio:o=1,hoverWidthRatio:r=1,activeOpacity:n=.8,className:s,...c}){let u=useRef(null),a$1=L(P(t)),l=useMemo(()=>{let i=t.width*r,b=t.height*o;return {width:`${i}px`,left:`${t.left+(t.width-i)/2}px`,height:`${b}px`,top:`${t.elementTop+(t.height-b)/2}px`,transition:a$1?"opacity":"opacity, width, left, top"}},[t,r,o]);return jsx("span",{ref:u,className:a("highlight bg-muted/60 absolute -z-1 rounded-md transition",e?"opacity-100":"opacity-0",s),style:{width:l.width,left:l.left,height:l.height,top:l.top,transitionProperty:l.transition},...c})}var E=createContext(null);function H({value:t,children:e}){return jsx(E.Provider,{value:t,children:e})}function f(){let t=useContext(E);if(!t)throw new Error("useTab must be used within a TabProvider");return t}function x({ref:t,activeTab:e}){J.useEffect(()=>{let o=t?.current;function r(){if(t.current&&e+1){let s=t.current.children[e],c=t.current.offsetWidth,u=s.offsetWidth,a=s.offsetLeft,l=t.current.scrollLeft,i=l;a+u>l+c?i=a+u-c:a<l&&(i=a),t.current.scrollTo({left:i,behavior:"smooth"});}n();}r();function n(){if(t.current){let s=t.current.offsetWidth,c=t.current.scrollWidth,a=t.current.scrollLeft;c>s?(Math.floor(s)>=Math.floor(c)-Math.floor(a)?t.current.classList.remove("end-shadow"):t.current.classList.add("end-shadow"),a!==0?t.current.classList.add("start-shadow"):t.current.classList.remove("start-shadow")):(t.current.classList.remove("start-shadow"),t.current.classList.remove("end-shadow"));}}return window.addEventListener("resize",r),o.addEventListener("scroll",n),()=>{window.removeEventListener("resize",r),o.removeEventListener("scroll",n);}},[e]);}var X=tv({base:"relative flex border-border",variants:{vertical:{true:"flex-col border-e pe-3",false:"justify-start border-b gap-4 pb-[1px] overflow-x-auto [scrollbar-width:none] [-ms-overflow-style:none] [&::-webkit-scrollbar]:hidden"}},defaultVariants:{vertical:false}});function R({children:t,className:e,...o}){let{ref:r,rect:n,vertical:s,activeTab:c,displayHighlight:u,setDisplayHighlight:a$1,hideHoverAnimation:l,highlightClassName:i}=f();return x({ref:r,activeTab:c}),jsxs(TabList,{ref:r,onMouseLeave:()=>a$1&&a$1(false),className:a("somaui-tab-list",X({vertical:s}),e),...o,children:[t,!l&&jsx(y,{rect:n,visible:u,hoverHeightRatio:.7,hoverWidthRatio:1,className:i})]})}var et=tv({base:"relative py-2.5 px-3 flex items-center hover:text-primary gap-1 [&>*]:pointer-events-none outline-none before:absolute before:bg-primary before:opacity-0 before:transition-all before:duration-200 cursor-pointer",variants:{selected:{true:"before:opacity-100 text-primary hover:text-primary-dark"},vertical:{true:"before:h-full before:w-0.5 before:-end-[13px] before:bottom-0",false:"whitespace-nowrap before:w-full before:h-0.5 before:start-0 before:-bottom-[1px]"}}});function T({children:t,className:e,activeClassName:o,onMouseOver:r,...n}){let{ref:s,setRect:c,vertical:u,setDisplayHighlight:a$1}=f();return jsx(Tab,{onMouseOver:i=>{c(i,()=>s.current),a$1?.(true),r?.(i);},className:({selected:i})=>a("somaui-tab-list-item",et({selected:i,vertical:u}),i&&o,e),...n,children:t})}T.displayName="TabListItem";var nt=tv({base:"py-2",variants:{vertical:{true:"",false:"mt-2"}},defaultVariants:{vertical:false}});function M({children:t,className:e,...o}){let{vertical:r}=f();return jsx(TabPanels,{className:a("somaui-tab-panels",nt({vertical:r}),e),...o,children:t})}function d({children:t,className:e,...o}){return jsx(TabPanel,{className:a("somaui-tab-panel",e),...o,children:t})}d.displayName="TabPanel";function h({vertical:t,className:e,selectedIndex:o,onChange:r,hideHoverAnimation:n,children:s,highlightClassName:c,...u}){let a$1=useRef(null),{rect:l,setRect:i}=g(),[b,N]=useState(0),[O,C]=useState(false);return jsx(H,{value:{ref:a$1,rect:l,setRect:i,vertical:t,displayHighlight:O,setDisplayHighlight:C,activeTab:o??b,hideHoverAnimation:n,highlightClassName:c},children:jsx(TabGroup,{as:"div",selectedIndex:o??b,onChange:r??N,className:a("somaui-tab-root","w-full",e,{"flex gap-4":t}),...u,children:s})})}h.List=R;h.ListItem=T;h.Panels=M;h.Panel=d;export{h as Tab};