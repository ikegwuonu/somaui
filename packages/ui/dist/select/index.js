import {f,d,e,i,g,k,h,j as j$1,b,a as a$5,c}from'../chunk-UIB5IY5W.js';import'../chunk-OFTA724O.js';import {a as a$2}from'../chunk-KQOZQ26D.js';import {a as a$1}from'../chunk-HAJDUVDC.js';import {a as a$3}from'../chunk-YMGWFAOA.js';import {a as a$4}from'../chunk-LYGZSVR4.js';import'../chunk-VA57PCYD.js';import {a}from'../chunk-FRVM5LHZ.js';import {useState,useCallback}from'react';import {Listbox,Label,ListboxButton,ListboxOptions,ListboxOption}from'@headlessui/react';import {tv}from'tailwind-variants';import {jsxs,jsx}from'react/jsx-runtime';function U(t){return t}function j({value:t,label:p}){return p||t||"Error: use getOptionDisplayValue prop"}function q(t){return c(t)||d(t)?t:t?.label?t.label:t?.name?t.name:t?.value?t.value:String(t)}var G=tv({base:"flex group items-center peer border-[length:var(--border-width)] hover:border-primary w-full transition duration-200 hover:ring-primary focus:border-primary focus:ring-[0.8px] focus:ring-primary rounded-[var(--border-radius)]",variants:{variant:{text:"border-transparent ring-transparent bg-transparent",outline:"border-border ring-border bg-transparent"},size:{sm:"px-2 py-1 text-xs h-8",md:"px-3 py-2 text-sm h-10",lg:"px-4 py-2 text-base h-12"},disabled:{true:"!bg-muted/70 backdrop-blur cursor-not-allowed !border-muted text-muted-foreground placeholder:text-muted-foreground !ring-muted"},error:{true:"!border-red hover:!border-red focus:!border-red !ring-red"},hasPrefix:{true:""},hasSuffix:{true:""}},compoundVariants:[{hasPrefix:true,class:"ps-2.5"},{hasSuffix:true,class:"pe-2.5"}],defaultVariants:{variant:"outline",size:"md"}});function J({label:t,labelWeight:p="medium",error:c,options:X,disabled:b$1,autoFocus:Y,helperText:V,prefix:y=null,placeholder:Z="Select...",inPortal:u=true,modal:_=false,displayValue:$=q,getOptionDisplayValue:ee=j,getOptionValue:L=U,getOptionValueKey:g$1,value:h$1,defaultValue:te,onChange:k$1,onClear:w,clearable:re,placement:ae="bottom-start",gap:se=6,size:s="md",variant:T="outline",suffix:m=jsx(b,{strokeWidth:"2",className:"size-4"}),searchable:oe,searchType:ne,searchProps:ie,stickySearch:le,searchPrefix:F=jsx(a$5,{strokeWidth:"2",className:"size-4"}),searchSuffix:E=null,searchDisabled:I,searchReadOnly:pe,onSearchChange:ce,searchPlaceHolder:ue="Search...",className:me,searchByKey:de="label",labelClassName:fe,selectClassName:be,optionClassName:ye,suffixClassName:ge,prefixClassName:he,errorClassName:xe,helperClassName:Ne,searchClassName:Se,dropdownClassName:ve,disableDefaultFilter:Oe,searchPrefixClassName:Ce,searchSuffixClassName:Pe,searchContainerClassName:Ve,...Le}){let[ke,R]=f(te,h$1),[B,H]=useState(""),d$1=h$1!==void 0?h$1:ke,f$1=!d(d$1)&&e(d$1),we=i(X,B,de,Oe),Te=useCallback(e=>{e?.stopPropagation(),H(""),w?.(e);},[w]),Fe=useCallback(e=>{R(e),k$1?.(e);},[k$1,R]),Ee=useCallback(e=>g$1?e[g$1]:L(e),[L,g$1]);return jsxs("div",{className:a("somaui-select-root","grid w-full grid-cols-1",me),children:[jsx(Listbox,{value:d$1,onChange:Fe,disabled:b$1,...Le,children:jsxs("div",{className:"contents",children:[t&&jsx(Label,{className:a("somaui-select-label","block",a$1.size[s],a$1.weight[p],b$1&&"text-muted-foreground",fe),children:t}),jsxs("div",{className:a(!u&&"relative"),children:[jsxs(ListboxButton,{className:G({variant:T,size:s,disabled:b$1,error:!!(c&&f$1),hasPrefix:!!y,hasSuffix:!!m,className:be}),autoFocus:Y,children:[y&&jsx("span",{className:a("somaui-select-prefix","block leading-normal whitespace-nowrap",he),children:y}),jsx("span",{className:a("somaui-select-value","block w-full truncate text-left rtl:text-right",f$1&&"text-muted-foreground"),children:f$1?Z:$(d$1)}),re&&!f$1&&jsx(a$2,{as:"span",size:s,onClick:Te,hasSuffix:!!m}),m&&jsx("span",{className:a("somaui-select-suffix","leading-normal whitespace-nowrap transition-transform duration-200 group-data-open:rotate-180",ge),children:m})]}),jsxs(ListboxOptions,{modal:_,portal:u,...u&&{anchor:{to:g[ae],gap:se}},className:a("somaui-select-options",j$1.base,j$1.shadow,u?j$1.inPortal:j$1.notInPortal,ve),children:[oe&&jsxs("div",{className:a(k.base,le&&k.stickySearch,Ve),children:[F&&jsx("span",{className:a("somaui-select-prefix",k.prefix,Ce),children:F}),jsx("input",{type:ne,spellCheck:false,value:B,disabled:I,readOnly:pe,placeholder:ue,onChange:e=>{H(e.target.value),ce?.(e.target.value);},onKeyDown:e=>h(e),className:G({variant:T,size:s,disabled:I,className:a(k.inputBase,Se)}),...ie}),E&&jsx("span",{className:a("somaui-select-suffix",k.suffix,Pe),children:E})]}),we.map(e=>jsx(ListboxOption,{...e?.disabled&&{disabled:e?.disabled},className:({focus:x})=>a("somaui-select-option","flex w-full items-center px-3 py-1.5",x&&"bg-muted/70","rounded-[calc(var(--border-radius)/2)]",s&&j$1.item.size[s],!e?.disabled&&"cursor-pointer",ye),value:Ee(e),children:({selected:x})=>jsx("div",{className:a(x?"font-medium":"text-foreground"),children:ee(e)})},e.value))]})]})]})}),!c&&V&&jsx(a$3,{size:s,className:Ne,children:V}),c&&jsx(a$4,{size:s,error:c,className:xe})]})}J.displayName="Select";export{J as Select};